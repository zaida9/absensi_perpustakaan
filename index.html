<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Absensi Perpustakaan ğŸ“š</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
    font-family: Poppins, sans-serif;
    background: #f2f6ff;
    padding: 20px;
}
h1 { text-align: center; }
.card {
    background: white;
    padding: 20px;
    border-radius: 16px;
    margin-bottom: 20px;
}
input, select, button {
    width: 100%;
    padding: 12px;
    margin-top: 10px;
    border-radius: 10px;
    border: 1px solid #ccc;
}
button {
    background: #6c63ff;
    color: white;
    font-weight: bold;
    cursor: pointer;
}
.moods {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-top: 10px;
}
.mood {
    font-size: 32px;
    text-align: center;
    cursor: pointer;
    padding: 10px;
    border-radius: 12px;
    background: #eee;
}
.mood.active {
    background: #6c63ff;
}
.list {
    margin-top: 20px;
}
.item {
    background: #fff;
    padding: 15px;
    border-radius: 14px;
    margin-bottom: 10px;
}
</style>
</head>

<body>

<h1>ğŸ“š Absensi Perpustakaan</h1>

<div class="card">
    <input id="nama" placeholder="Nama">
    <input id="kelas" placeholder="Kelas">
    <select id="tujuan">
        <option value="">Tujuan</option>
        <option>Membaca</option>
        <option>Pinjam Buku</option>
        <option>Tugas</option>
    </select>

    <div class="moods">
        <div class="mood" data-mood="Senang">ğŸ˜„</div>
        <div class="mood" data-mood="Sedih">ğŸ˜¢</div>
        <div class="mood" data-mood="Marah">ğŸ˜¡</div>
        <div class="mood" data-mood="Lelah">ğŸ˜´</div>
        <div class="mood" data-mood="Stres">ğŸ¤¯</div>
        <div class="mood" data-mood="Biasa">ğŸ˜</div>
    </div>

    <button onclick="simpan()">ABSEN</button>
</div>

<div class="card">
    <h3>ğŸ“‹ Data Absensi</h3>
    <div id="list" class="list"></div>
</div>

<script>
let moodDipilih = "";

document.querySelectorAll(".mood").forEach(el => {
    el.onclick = () => {
        document.querySelectorAll(".mood").forEach(m => m.classList.remove("active"));
        el.classList.add("active");
        moodDipilih = el.dataset.mood + " " + el.innerText;
    }
});

function simpan() {
    const nama = document.getElementById("nama").value;
    const kelas = document.getElementById("kelas").value;
    const tujuan = document.getElementById("tujuan").value;

    if (!nama || !kelas || !tujuan || !moodDipilih) {
        alert("ISI SEMUA ğŸ˜¡");
        return;
    }

    const data = {
        nama,
        kelas,
        tujuan,
        mood: moodDipilih,
        waktu: new Date().toLocaleString()
    };

    let absensi = JSON.parse(localStorage.getItem("absensi")) || [];
    absensi.push(data);
    localStorage.setItem("absensi", JSON.stringify(absensi));

    tampilkan();
    document.querySelector("form")?.reset();
}

function tampilkan() {
    const list = document.getElementById("list");
    list.innerHTML = "";

    const absensi = JSON.parse(localStorage.getItem("absensi")) || [];

    if (absensi.length === 0) {
        list.innerHTML = "<p>Belum ada data</p>";
        return;
    }

    absensi.forEach(a => {
        list.innerHTML += `
        <div class="item">
            <b>${a.nama}</b> (${a.kelas})<br>
            ${a.tujuan}<br>
            Mood: ${a.mood}<br>
            <small>${a.waktu}</small>
        </div>`;
    });
}

tampilkan();
</script>

</body>
</html>
